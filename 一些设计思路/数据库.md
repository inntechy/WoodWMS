## 数据库设计思路及理由

### 1.入库单

根据入库单上的信息，**柜号、品牌、品名、货号、等级以及总支数和立方数**唯一确定，表格中的子项结构一致。但以上的内容都不能作为入库单的ID，因为都有可能跟其他入库单有重复。暂定以入库的时间作为入库单的主键。

**表名: inbound_note**

| 键名 | 示例 | 数据类型 | 注释                |
| ---- | ---- | -------- | --------------- |
| ID_time | 1532437420447 | bigint | 主键：使用Date.getTime()方法获得的与1970.1.1的时间差值，单位为ms |
| createAt | 2018-7-24 21:07:52 | string(20) | 创建时间：使用Date.toLocaleString()方法获得的当前时间日期 |
| container_id | NYKU5229160 | string(20) | 柜号：货柜号，手动输入 |
| brand | APP PINE | string(20) | 品牌：手动输入 |
| name | PINE | string(20) | 品名：手动输入 |
| level | ACOL | string(10) | 等级：手动输入 |
| quanlity | 224 | int | 总支数：各子项支数的和 |
| volume_sum | 4.256 | float | 总立方数：各子项立方数的和 |
| goods_mark | 0007065 | string(10) | 货号：货品的一个标记，不唯一 |

**表名：inbound_item**

| 键名      | 示例          | 数据类型 | 注释                                                         |
| --------- | ------------- | -------- | ------------------------------------------------------------ |
| ID | 153243742044701 | bigint | 主键：ID_time + 两位数，因此每个入库单可以有100个子项 |
| ID_time   | 1532437420447 | bigint   | 外键：在创建新的item的时候，从note表中传入。不需要重新getTime。 |
| thickness | 38            | int      | 厚度：单位mm                                                 |
| width     | 125           | int      | 宽度：单位mm                                                 |
| length    | 4             | float    | 长度：单位M                                                  |
| pcs       | 224           | int      | 支数：item中包含的材料数量                                   |
| volume    | 4.256         | float    | 由前面几项算出来的材料体积，单位m³                           |

### 2.送货单

**表名：delivery_note**

| 键名        | 示例          | 数据类型   | 注释                                                         |
| ----------- | ------------- | ---------- | ------------------------------------------------------------ |
| id_delivery | 1532437420447 | bigint     | 主键：使用Date.getTime()方法获得的与1970.1.1的时间差值，单位为ms |
| editor      | 张三          | string(10) | 制单：手动输入                                               |
| total_price | 30000         | float      | 合计金额：各子项金额之和                                     |

**表名：delivery_item**

它的厚、宽、长跟入库单中的值应该是一致的。

| 键名        | 示例            | 数据类型   | 注释                                                         |
| ----------- | --------------- | ---------- | ------------------------------------------------------------ |
| ID          | 1532437420447 | bigint     | 主键：使用Date.getTime()方法获得的与1970.1.1的时间差值，单位为ms    |
| id_delivery | 1532437420447   | bigint     | 外键：在创建新的item的时候，从note表中传入。不需要重新getTime。 |
| unitprice   | 1250.00         | float      | 单价：木材单位体积的价格                                     |
| amount      | 3000.00         | float      | 总价：单个item的总价格                                       |
| remarks     | 备注中的内容    | String(50) | 备注：手动输入                                               |
| pcs         | 100             | int        | 支数：卖出的支数                                             |
| volume      | 200.00          | float      | 立方数：卖出的体积                                           |
| thickness   | 38              | int        | 厚度：单位mm                                                 |
| width       | 125             | int        | 宽度：单位mm                                                 |
| length      | 4               | float      | 长度：单位M                                                  |

